{"version":3,"file":"vg-player.component.js","sourceRoot":"../../../../../libs/ngx-videogular/core/src/","sources":["lib/components/vg-player/vg-player.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Output,\n  Component,\n  EventEmitter,\n  ElementRef,\n  HostBinding,\n  QueryList,\n  AfterContentInit,\n  ContentChildren,\n  ViewEncapsulation,\n  OnDestroy,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { VgApiService } from '../../services/vg-api/vg-api.service';\nimport { VgFullscreenApiService } from '../../services/vg-fullscreen-api/vg-fullscreen-api.service';\nimport { VgControlsHiddenService } from '../../services/vg-controls-hidden/vg-controls-hidden.service';\nimport { VgMediaDirective } from '../../directives/vg-media/vg-media.directive';\nimport { VgUtilsService } from '../../services/vg-utils/vg-utils.service';\n\n@Component({\n  selector: 'vg-player',\n  encapsulation: ViewEncapsulation.None,\n  template: `<ng-content></ng-content>`,\n  styles: [\n    `\n      vg-player {\n        font-family: 'videogular';\n        position: relative;\n        display: flex;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: black;\n      }\n      vg-player.fullscreen {\n        position: fixed;\n        left: 0;\n        top: 0;\n      }\n      vg-player.native-fullscreen.controls-hidden {\n        cursor: none;\n      }\n    `,\n  ],\n  providers: [VgApiService, VgFullscreenApiService, VgControlsHiddenService],\n})\nexport class VgPlayerComponent implements AfterContentInit, OnDestroy {\n  elem: HTMLElement;\n\n  @HostBinding('class.fullscreen') isFullscreen = false;\n  @HostBinding('class.native-fullscreen') isNativeFullscreen = false;\n  @HostBinding('class.controls-hidden') areControlsHidden = false;\n  @HostBinding('style.z-index') zIndex: string;\n\n  @Output() onPlayerReady: EventEmitter<VgApiService> = new EventEmitter<VgApiService>();\n  @Output() onMediaReady: EventEmitter<any> = new EventEmitter();\n\n  @ContentChildren(VgMediaDirective) medias: QueryList<VgMediaDirective>;\n\n  subscriptions: Subscription[] = [];\n\n  constructor(\n    ref: ElementRef,\n    public api: VgApiService,\n    public fsAPI: VgFullscreenApiService,\n    private controlsHidden: VgControlsHiddenService\n  ) {\n    this.elem = ref.nativeElement;\n\n    this.api.registerElement(this.elem);\n  }\n\n  ngAfterContentInit() {\n    this.medias.toArray().forEach((media) => {\n      this.api.registerMedia(media);\n    });\n\n    this.fsAPI.init(this.elem, this.medias);\n\n    this.subscriptions.push(\n      this.fsAPI.onChangeFullscreen.subscribe(\n        this.onChangeFullscreen.bind(this)\n      )\n    );\n    this.subscriptions.push(\n      this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))\n    );\n\n    this.api.onPlayerReady(this.fsAPI);\n    this.onPlayerReady.emit(this.api);\n  }\n\n  onChangeFullscreen(fsState: boolean) {\n    if (!this.fsAPI.nativeFullscreen) {\n      this.isFullscreen = fsState;\n      this.zIndex = fsState ? VgUtilsService.getZIndex().toString() : 'auto';\n    } else {\n      this.isNativeFullscreen = fsState;\n    }\n  }\n\n  onHideControls(hidden: boolean) {\n    this.areControlsHidden = hidden;\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach((s) => s.unsubscribe());\n  }\n}\n"]}